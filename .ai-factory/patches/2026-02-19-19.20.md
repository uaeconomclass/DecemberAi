# Restore missing WordPress-era backend contract with compatible PHP endpoints

**Date:** 2026-02-19 19:20
**Files:** backend/handlers_api/bootstrap.php, backend/handlers_api/register.php, backend/handlers_api/login.php, backend/handlers_api/userData.php, backend/handlers_api/change_password.php, backend/handlers_api/user_update_level.php, backend/handlers_api/user_update_skill.php, backend/handlers_api/voice_response.php, backend/handlers_api/upload_user_voice.php, backend/README.md
**Severity:** critical

## Problem

The Android app depended on backend endpoints under `/handlers_api/*.php`, but the original backend (previously hosted with WordPress infrastructure) was lost. As a result, auth, profile loading, and progress update flows could not function.

## Root Cause

The mobile app had hardcoded endpoint paths and response contract assumptions, but the backend implementation and deployment artifacts were not versioned in this repository. Once WordPress hosting/backend was gone, there was no recoverable source of truth in code except the client-side contract.

## Solution

Implemented a compatible PHP backend layer inside the repo:
- Recreated all expected endpoint files under `backend/handlers_api/`
- Added shared bootstrap with:
  - SQLite persistence
  - auto-migrations
  - seed data for lessons/practices
  - input helpers and response helpers
- Matched client expectations:
  - `register/login/change_password/user_update_*` return plain `true/false`
  - `userData.php` returns exact JSON fields used by `MainActivity`
- Added backward compatibility endpoints for legacy voice-upload route naming.
- Added `[FIX]` logging to every endpoint via `error_log`.
- Added deployment and smoke-test instructions in `backend/README.md`.

## Prevention

- Keep backend source under version control in the same mono-repo or clearly linked service repo.
- Add API contract tests (request/response snapshot checks) for each mobile-consumed endpoint.
- Add CI smoke test that validates all required endpoint files exist and return expected schema.
- Avoid hardcoded hostnames/paths in mobile client; use configurable base URL per environment.

## Tags

`#backend-recovery` `#php` `#android-contract` `#wordpress-migration` `#api-compatibility`


